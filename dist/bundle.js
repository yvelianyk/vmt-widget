!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VMTWidget=t():e.VMTWidget=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.constants={CONTAINER_ID:"venue-mapping-tool",API_POINT:"http://localhost:3000",IFRAME_NAME:"__VMT_TOOL__",messages:{missedParams:"VENUE MAPPING TOOL: missed one of the required arguments!",noContainer:function(e){return"VENUE MAPPING TOOL: There is no element with "+e+" id!"}},styles:{DEFAULT_IFRAME_HEIGHT:500,fullScreenStyles:"position: fixed; padding: 0; margin: 0; width: 100vw;\n            height: 100vh; outline: none; border: none; top: 0;left: 0"}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=o(n(2)),s=n(0),a=new(o(n(3)).default),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"launch",value:function(e){var t=this,n=new i.default({containerId:e.containerId||s.constants.CONTAINER_ID,memberId:e.memberId,eventId:e&&e.eventId,venueId:e.venueId,apiPoint:e.apiPoint||s.constants.API_POINT,mode:e&&e.mode,token:e.token});a.launch(),a.method("closeWidget",function(){a.removeMethod("toggleFullScreen"),a.removeMethod("closeWidget"),n.close(a.destroyServer),t.onCloseFn()}),a.method("toggleFullScreen",function(){n.toggleFullScreen()})}},{key:"method",value:function(e,t){a.method(e,t)}},{key:"onClose",value:function(e){this.onCloseFn=e}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.getElementById(t.containerId);this.isValidParams(t,n)&&this.initIframe(Object.assign({root:n},t))}return o(e,[{key:"close",value:function(e){var t=this.root.getElementsByTagName("iframe")[0];this.root.removeChild(t),e()}},{key:"toggleFullScreen",value:function(){var e=document.querySelector('iframe[name="'+r.constants.IFRAME_NAME+'"]');this.initialStyles?(e.style.cssText=this.initialStyles,this.initialStyles=null):""===this.initialStyles?(e.removeAttribute("style"),this.initialStyles=null):(this.initialStyles=e.style.cssText,e.style.cssText=r.constants.styles.fullScreenStyles)}},{key:"isValidParams",value:function(e,t){if(!e.memberId||!e.apiPoint||null===t){var n=null===t?r.constants.messages.noContainer(e.containerId):r.constants.messages.missedParams;return console.error(n),!1}return!0}},{key:"initIframe",value:function(e){var t=e.root;this.root=t,this.options=e;var n=document.createElement("iframe");n.name=r.constants.IFRAME_NAME,n.width=t.offsetWidth||t.parentElement.offsetWidth,n.height=t.offsetHeight||r.constants.styles.DEFAULT_IFRAME_HEIGHT,n.frameBorder=0,n.src=this.getIframeUrl(e),t.appendChild(n),n.focus()}},{key:"getIframeUrl",value:function(e){var t=e.apiPoint,n=e.memberId,o=e.eventId,r=e.token,i=e.venueId,s=e.mode;return t+"?member="+n+(o?"&event="+o:"")+"&token="+r+"&venue="+i+(s?"&mode="+s:"")}}]),e}();t.default=i},function(e,t,n){"use strict";function o(e){function t(e,t,n,o){var r=JSON.stringify({jsonrpc:"2.0",code:t,error:n,id:o||null});e&&e.postMessage(r,"*")}var n=void 0;if(e.originalEvent&&(e=e.originalEvent),e.data&&"string"==typeof e.data&&""!==e.data){try{n=JSON.parse(e.data)}catch(e){}if(n&&"2.0"===n.jsonrpc&&!n.error&&!n.result){if("function"!=typeof r[n.method])return t(e.source,-32601,"Method not found: "+n.method,n.id);if(n.method&&!Array.isArray(n.params))return t(e.source,-32700,"Invalid request",n.id);try{var o=r[n.method].apply(this,n.params);Promise.resolve(o).then(function(t){if(!e.source)return!1;n.id&&e.source.postMessage(JSON.stringify({jsonrpc:"2.0",result:t,id:n.id}),"*")})}catch(o){throw t(e.source,-32e3,o.message,n.id),o}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.method=function(e,t){r[e]=t},this.removeMethod=function(e){delete r[e]},this.launch=function(){window.addEventListener("message",o)},this.destroyServer=function(){window.removeEventListener("message",o)}};var r={}}])});